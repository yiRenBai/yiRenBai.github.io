<hr>
<p>title: Advanced Settings</p>
<h2 id="description-NexT-User-Docs-–-Advanced-Settings"><a href="#description-NexT-User-Docs-–-Advanced-Settings" class="headerlink" title="description: NexT User Docs – Advanced Settings"></a>description: NexT User Docs – Advanced Settings</h2><p>Besides normal <a href="/docs/theme-settings/">Theme Settings</a> and <a href="/docs/third-party-services/">Third-party Services</a>, NexT supports some advanced settings which makes NexT customizable.<br>Please note that those settings may lead to abnormal behavior if they are wrong. Change them only when you know for what they are.</p>
<h3 id="Third-party-JS-Libraries"><a href="#Third-party-JS-Libraries" class="headerlink" title="Third-party JS Libraries"></a>Third-party JS Libraries</h3><p>This feature is located under <code>vendors</code> section in {% label primary@theme config file %}.<br><code>_internal: lib</code> is used to tell NexT where internal library is located and you shouldn’t change this in most cases.</p>
<p>And next part is config of each library; if you leave it blank NexT will use internal version. Each config is in format of <code>libname: CDN URL</code>. For example:</p>
<pre><code class="yml"><span class="attr">anime:</span> <span class="string">//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js</span></code></pre>
<p>You can set it to a proper CDN URL, which can make static assets (JavaScript Third-party Library) load faster. Now NexT contains following third-party library:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Original Link</th>
<th>NexT Internal Version</th>
</tr>
</thead>
<tbody><tr>
<td>Anime.js</td>
<td><a href="https://animejs.com">animejs.com</a></td>
<td>3.1.0</td>
</tr>
<tr>
<td>FontAwesome</td>
<td><a href="http://fontawesome.io">fontawesome.io</a></td>
<td>4.7.0</td>
</tr>
<tr>
<td>VelocityJS</td>
<td><a href="http://velocityjs.org">velocityjs.org</a></td>
<td>1.2.1</td>
</tr>
<tr>
<td>VelocityJS UI Pack</td>
<td><a href="http://velocityjs.org/#uiPack">velocityjs.org/#uiPack</a></td>
<td>1.2.1</td>
</tr>
</tbody></table>
<p>NexT use the <a href="https://www.jsdelivr.com/">jsDelivr</a> as the default CDN service provider. The reason that jsDelivr is chosen is because it is fast everywhere, and jsDelivr has the valid ICP license issued by the Chinese government, it can be accessed in China pretty well.</p>
<p>And we also provide other optional CDNs, including the famous <a href="https://cdnjs.com/">CDNJS</a>.<br>Particularly, if you are a Chinese blogger or most of your visits come from China, please note that <strong>the CDNJS is blocked in some parts of China</strong>, don’t use it as your CDN.</p>
<p>If you want to try the other CDNs not included in the optional list, you would better use the corresponding version.<br>«Internal version» is the version that NexT tested and uses. And if you need other versions you need to test them first.</p>
<pre><code class="yml"><span class="comment"># Script Vendors. Set a CDN address for the vendor you want to customize.</span>
<span class="comment"># Be aware that you would better use the same version as internal ones to avoid potential problems.</span>
<span class="comment"># Please use the https protocol of CDN files when you enable https on your site.</span>
<span class="attr">vendors:</span>
  <span class="comment"># Internal path prefix. Please do not edit it.</span>
<span class="attr">  _internal:</span> <span class="string">lib</span>

  <span class="comment"># Internal version: 3.1.0</span>
  <span class="comment"># Example:</span>
  <span class="comment"># anime: //cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js</span>
<span class="attr">  anime:</span>

  <span class="comment"># Internal version: 4.7.0</span>
  <span class="comment"># Example:</span>
  <span class="comment"># fontawesome: //cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css</span>
  <span class="comment"># fontawesome: //cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css</span>
<span class="attr">  fontawesome:</span>

  <span class="comment"># MathJax</span>
  <span class="comment"># Example:</span>
  <span class="comment"># mathjax: //cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML</span>
  <span class="comment"># mathjax: //cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML</span>
  <span class="comment"># mhchem: //cdn.jsdelivr.net/npm/mathjax-mhchem@3</span>
  <span class="comment"># mhchem: //cdnjs.cloudflare.com/ajax/libs/mathjax-mhchem/3.3.0</span>
<span class="attr">  mathjax:</span>
<span class="attr">  mhchem:</span>

  <span class="comment"># KaTeX</span>
  <span class="comment"># Example:</span>
  <span class="comment"># katex: //cdn.jsdelivr.net/npm/katex@0/dist/katex.min.css</span>
  <span class="comment"># katex: //cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css</span>
  <span class="comment"># copy_tex_js: //cdn.jsdelivr.net/npm/katex@0/dist/contrib/copy-tex.min.js</span>
  <span class="comment"># copy_tex_css: //cdn.jsdelivr.net/npm/katex@0/dist/contrib/copy-tex.min.css</span>
<span class="attr">  katex:</span>
<span class="attr">  copy_tex_js:</span>
<span class="attr">  copy_tex_css:</span>

  <span class="comment"># Internal version: 0.2.8</span>
  <span class="comment"># Example:</span>
  <span class="comment"># pjax: //cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js</span>
<span class="attr">  pjax:</span>

  <span class="comment"># FancyBox</span>
  <span class="comment"># Example:</span>
  <span class="comment"># jquery: //cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js</span>
  <span class="comment"># fancybox: //cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js</span>
  <span class="comment"># fancybox_css: //cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css</span>
<span class="attr">  jquery:</span>
<span class="attr">  fancybox:</span>
<span class="attr">  fancybox_css:</span>

  <span class="comment"># Medium-zoom</span>
  <span class="comment"># Example:</span>
  <span class="comment"># mediumzoom: //cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js</span>
<span class="attr">  mediumzoom:</span>

  <span class="comment"># Lazyload</span>
  <span class="comment"># Example:</span>
  <span class="comment"># lazyload: //cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js</span>
  <span class="comment"># lazyload: //cdnjs.cloudflare.com/ajax/libs/lozad.js/1.9.0/lozad.min.js</span>
<span class="attr">  lazyload:</span>

  <span class="comment"># Pangu</span>
  <span class="comment"># Example:</span>
  <span class="comment"># pangu: //cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js</span>
  <span class="comment"># pangu: //cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js</span>
<span class="attr">  pangu:</span>

  <span class="comment"># Quicklink</span>
  <span class="comment"># Example:</span>
  <span class="comment"># quicklink: //cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js</span>
<span class="attr">  quicklink:</span>

  <span class="comment"># DisqusJS</span>
  <span class="comment"># Example:</span>
  <span class="comment"># disqusjs_js: //cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js</span>
  <span class="comment"># disqusjs_css: //cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css</span>
<span class="attr">  disqusjs_js:</span>
<span class="attr">  disqusjs_css:</span>

  <span class="comment"># Valine</span>
  <span class="comment"># Example:</span>
  <span class="comment"># valine: //cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js</span>
  <span class="comment"># valine: //cdnjs.cloudflare.com/ajax/libs/valine/1.3.4/Valine.min.js</span>
<span class="attr">  valine:</span>

  <span class="comment"># Gitalk</span>
  <span class="comment"># Example:</span>
  <span class="comment"># gitalk_js: //cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js</span>
  <span class="comment"># gitalk_css: //cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css</span>
<span class="attr">  gitalk_js:</span>
<span class="attr">  gitalk_css:</span>

  <span class="comment"># Algolia Search</span>
  <span class="comment"># Example:</span>
  <span class="comment"># algolia_instant_js: //cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.js</span>
  <span class="comment"># algolia_instant_css: //cdn.jsdelivr.net/npm/instantsearch.js@2/dist/instantsearch.min.css</span>
<span class="attr">  algolia_instant_js:</span>
<span class="attr">  algolia_instant_css:</span>

  <span class="comment"># PDF</span>
  <span class="comment"># Example:</span>
  <span class="comment"># pdfobject: //cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js</span>
  <span class="comment"># pdfobject: //cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js</span>
<span class="attr">  pdfobject:</span>

  <span class="comment"># Mermaid</span>
  <span class="comment"># Example:</span>
  <span class="comment"># mermaid: //cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js</span>
  <span class="comment"># mermaid: //cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js</span>
<span class="attr">  mermaid:</span>

  <span class="comment"># Internal version: 1.2.1</span>
  <span class="comment"># Example:</span>
  <span class="comment"># velocity: //cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js</span>
  <span class="comment"># velocity: //cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js</span>
  <span class="comment"># velocity_ui: //cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js</span>
  <span class="comment"># velocity_ui: //cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js</span>
<span class="attr">  velocity:</span>
<span class="attr">  velocity_ui:</span>

  <span class="comment"># Internal version: 1.0.2</span>
  <span class="comment"># Example:</span>
  <span class="comment"># pace: //cdn.jsdelivr.net/npm/pace-js@1/pace.min.js</span>
  <span class="comment"># pace: //cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js</span>
  <span class="comment"># pace_css: //cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css</span>
  <span class="comment"># pace_css: //cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css</span>
<span class="attr">  pace:</span>
<span class="attr">  pace_css:</span>

  <span class="comment"># Internal version: 1.0.0</span>
  <span class="comment"># Example:</span>
  <span class="comment"># three: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three.min.js</span>
  <span class="comment"># three_waves: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/three-waves.min.js</span>
  <span class="comment"># canvas_lines: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/canvas_lines.min.js</span>
  <span class="comment"># canvas_sphere: //cdn.jsdelivr.net/gh/theme-next/theme-next-three@1/canvas_sphere.min.js</span>
<span class="attr">  three:</span>
<span class="attr">  three_waves:</span>
<span class="attr">  canvas_lines:</span>
<span class="attr">  canvas_sphere:</span>

  <span class="comment"># Internal version: 1.0.0</span>
  <span class="comment"># Example:</span>
  <span class="comment"># canvas_nest: //cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js</span>
  <span class="comment"># canvas_nest_nomobile: //cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest-nomobile.min.js</span>
<span class="attr">  canvas_nest:</span>
<span class="attr">  canvas_nest_nomobile:</span>

  <span class="comment"># Internal version: 1.0.0</span>
  <span class="comment"># Example:</span>
  <span class="comment"># canvas_ribbon: //cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-ribbon@1/canvas-ribbon.js</span>
<span class="attr">  canvas_ribbon:</span></code></pre>
<h3 id="Injects"><a href="#Injects" class="headerlink" title="Injects"></a>Injects</h3><p>We extended the hexo filter and added <code>theme_inject</code>, so user can add the desired custom content to any injection point.</p>
<h4 id="Synopsis"><a href="#Synopsis" class="headerlink" title="Synopsis"></a>Synopsis</h4><pre><code class="js">hexo.extend.filter.register(<span class="string">'theme_inject'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">injects</span>) </span>{
  <span class="comment">// ...</span>
});</code></pre>
<p>A injects argument will get passed into the function, so we can use it add custom code in <code>injectPoint</code> as following.</p>
<p>For inject view:</p>
<pre><code class="js"><span class="comment">// The name of same `injectPoint` suggest be unique. If same, it will override low priority configurations.</span>
<span class="comment">// `locals` and `options` is the same as partial https://hexo.io/docs/helpers#partial.</span>
<span class="comment">// `order` defines the order of injection, which by default depends on the priority of injection.</span>
hexo.extend.filter.register(<span class="string">'theme_inject'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">injects</span>) </span>{
  <span class="comment">// it will put code from this filePath into injectPoint.</span>
  injects.[injectPoint].file(name, filePath, [locals, options, order]);
  <span class="comment">// it will put raw string as code into injectPoint.</span>
  injects.[injectPoint].raw(name, raw, [locals, options, order]);
});</code></pre>
<p>For inject style:</p>
<pre><code class="js">hexo.extend.filter.register(<span class="string">'theme_inject'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">injects</span>) </span>{
  <span class="comment">// it will put styleFile into injectPoint.</span>
  injects.[injectPoint].push(styleFile);
});</code></pre>
<p>These are many <code>injectPoint</code>, defined in <a href="https://github.com/theme-next/hexo-theme-next/blob/master/scripts/events/lib/injects-point.js"><code>injects-point.js</code></a></p>
<pre><code class="js"><span class="built_in">module</span>.exports = {
  views: [<span class="string">'head'</span>, <span class="string">'header'</span>, <span class="string">'sidebar'</span>, <span class="string">'postMeta'</span>, <span class="string">'postBodyEnd'</span>, ..., <span class="string">'footer'</span>, <span class="string">'bodyEnd'</span>],
  styles: [<span class="string">'variable'</span>, <span class="string">'mixin'</span>, <span class="string">'style'</span>]
};</code></pre>
<p><code>custom_file_path</code> also uses this API, see <a href="https://github.com/theme-next/hexo-theme-next/blob/master/scripts/filters/default-injects.js">default-injects.js</a>. It will consume <code>custom</code> name in view inject points. So if you use <code>custom_file_path</code>, please not use <code>custom</code>.</p>
<p>{% note warning %}<br>You have to note path, it must absolute or relative to <code>hexo_dir</code>.<br>{% endnote %}</p>
<h4 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h4><p><strong>One:</strong> load a custom script. We can add it in <code>bodyEnd</code>.</p>
<pre><code class="js">hexo.extend.filter.register(<span class="string">'theme_inject'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">injects</span>) </span>{
  injects.bodyEnd.raw(<span class="string">'load-custom-js'</span>, <span class="string">'&lt;script src="js-path-or-cdn.js"&gt;&lt;/script&gt;'</span>, {}, {<span class="attr">cache</span>: <span class="literal">true</span>});
});</code></pre>
<p><strong>Two:</strong> add a custom <code>my-favourite-food.swig</code> to sidebar.</p>
<p>Step1: you should create <code>my-favourite-food.swig</code> in any path(e.g. <code>source/_data/</code>) as below. You can get variable from <code>hexo</code> or <code>local</code> defined in filter.</p>
<pre><code class="html">{% for food in foods %}
  <span class="tag">&lt;<span class="name">div</span>&gt;</span>{{food}}<span class="tag">&lt;/<span class="name">div</span>&gt;</span>
{% endfor %}</code></pre>
<p>Step2: add filter to load it.</p>
<pre><code class="js">hexo.extend.filter.register(<span class="string">'theme_inject'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">injects</span>) </span>{
  injects.sidebar.file(<span class="string">'my-favourite-food'</span>, <span class="string">'source/_data/my-favourite-food.swig'</span>, {
    foods: [<span class="string">'apple'</span>, <span class="string">'orange'</span>]
  });
});</code></pre>
<p><strong>Three:</strong> want to have big header, put <code>big-header.styl</code> to NexT.</p>
<p>Of course, you need to create this file first(e.g. <code>source/_data/big-header.styl</code>).</p>
<pre><code class="css"><span class="selector-tag">h1</span> {
  <span class="attribute">font-size</span>: <span class="number">2rem</span>;
}</code></pre>
<p>And then add it in filter.</p>
<pre><code class="js">hexo.extend.filter.register(<span class="string">'theme_inject'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">injects</span>) </span>{
  injects.style.push(<span class="string">'source/_data/big-header.styl'</span>);
});</code></pre>
<h4 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h4><p>We also support hexo’s plugin system, which makes it easy to extend functions without modifying the source code of the core module. You can see <a href="https://hexo.io/docs/plugins.html#Plugin">https://hexo.io/docs/plugins.html#Plugin</a> to learn how to create a plugin.</p>
